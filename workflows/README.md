# EPI Proof-of-Concept Code - Workflows
This code contains example workflows for the Brane framework that can be used for the proof-of-concept described in [\[1\]](../README.md#references). Concretely, it specifies what a scientist wishing to use Brane and the data it has access to wants to execute.


## Structure
There are two folders that contains workflows, ordered by scenario.

In the first scenario, a single workflow is used to analyze the two ECT partitions (`st_antonius_ect` on the St. Antonius' side, and `umc_utrecht_ect` for the UMC Utrecht's) and compute a P-value, in accordance with the paper. The code that is called refers to the code developed by [\[2\]](../README.md#references), which is available as [an R-package](https://cran.r-project.org/web/packages/safestats/index.html).

The second scenario is more complicated. Multiple models are trained in order to be able to compare them:
- 2 models are trained classically on each partition of the ECT dataset ([`classifier_central.bs`](./scenario2/classifier_central.bs));
- 1 model is trained in a federated manner on both partitions of the ECT dataset ([`classifier_federated.bs`](./scenario2/classifier_federated.bs)); and
- 1 model is trained in a classic manner on synthetic data generated by a synthetic generation model trained in a federated manner on both partitions of the ECT dataset ([`synthetic.bs`](./scenario2/synthetic.bs); then [`generate.bs`](./scenario2/generate.bs); and then [`classifier_central.bs`](./scenario2/classifier_central.bs)).

Other workflows are used to either preprocess the data (train/test split is done by [`split.bs`](./scenario2/split.bs)) or validate the models ([`validate.bs`](./scenario2/validate.bs)).


## Usage
If you have access to the appropriate Brane packages, you can run the workflows with the `brane` CLI tool:
```sh
brane run ./workflows/scenario2/classifier_central.bs
```
